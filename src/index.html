<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Balls</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

      <style>
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
     <script src="https://cdn.babylonjs.com/cannon.js"></script>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
        <script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <script src="../assets/js/babylon.gridMaterial.min.js"></script>
    <script src="https://code.jquery.com/pep/0.4.1/pep.js"></script>
</head>
<body>


   <canvas id="renderCanvas" touch-action="none"></canvas> 

    <script>
    	 var canvas = document.getElementById("renderCanvas"); // Get the canvas element 

            var engine = new BABYLON.Engine(canvas, true); // Generate the BABYLON 3D engine
  var gravityVector = new BABYLON.Vector3(1,10, 0);
    var physicsPlugin = new BABYLON.CannonJSPlugin();
 /******* Add the create scene function ******/
var createScene = function () {

    // This creates a basic Babylon Scene object (non-mesh)
    var scene = new BABYLON.Scene(engine);


   
    
    // This creates and positions a free camera (non-mesh)
    var camera = new BABYLON.FreeCamera("camera1", new BABYLON.Vector3(-20, 10, -20), scene);

    // This targets the camera to scene origin
    camera.setTarget(BABYLON.Vector3.Zero());

    // This attaches the camera to the canvas
    camera.attachControl(canvas, true);
var blueMat = new BABYLON.StandardMaterial("blueMat", scene);
  blueMat.emissiveColor = new BABYLON.Color3(0, 0, 1);
  blueMat.freeze();
  var greenMat = new BABYLON.StandardMaterial("blueMat", scene);
  greenMat.emissiveColor = new BABYLON.Color3(0, 1, 0);
    // This creates a light, aiming 0,1,0 - to the sky (non-mesh)
    var light = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(0, 1, 0), scene);

    // Default intensity is 1. Let's dim the light a small amount
    light.intensity = 0.3;

    // Our built-in 'sphere' shape. Params: name, subdivs, size, scene
    var sphere = BABYLON.Mesh.CreateSphere("sphere1", 6, 2, scene);

      var sphereTwo = BABYLON.Mesh.CreateSphere("sphere2", 6, 2, scene);

      var sphereThree = BABYLON.Mesh.CreateSphere("sphere2", 6, 2, scene);

      var sphereFour = BABYLON.Mesh.CreateSphere("sphere2", 6, 2, scene);

      var sphereFive = BABYLON.Mesh.CreateSphere("sphere2", 6, 2, scene);

      var sphereSix = BABYLON.Mesh.CreateSphere("sphere2", 6, 2, scene);

    // Move the sphere upward 1/2 its height
     sphere.position.z = -4;
    sphere.position.y =1;
     sphereTwo.position.x =-10;
      sphereTwo.position.y =1;
       sphereTwo.position.z = -3.5;
    sphereThree.position.x =  Math.floor(Math.random() * Math.floor(10));
      sphereThree.position.y =  1;
      sphereThree.position.z =  Math.floor(Math.random() * Math.floor(10));
          sphereFour.position.x =  Math.floor(Math.random() * Math.floor(10));
      sphereFour.position.y =  1;
       sphereFour.position.z =  Math.floor(Math.random() * Math.floor(10));

       sphereFive.position.x =  Math.floor(Math.random() * Math.floor(10));
        sphereFive.position.y =  1;
         sphereFive.position.z =  Math.floor(Math.random() * Math.floor(10));
         sphereSix.position.x =  Math.floor(Math.random() * Math.floor(10));
      sphereSix.position.y =  1;
         sphereSix.position.z =  Math.floor(Math.random() * Math.floor(10));




    // Our built-in 'ground' shape. Params: name, width, depth, subdivs, scene
    var ground = BABYLON.Mesh.CreateGround("ground1", 40, 70  , 2, scene);
    var groundTwo = BABYLON.Mesh.CreateGround("ground1", 2.5, 70, 2, scene);
      var groundThree = BABYLON.Mesh.CreateGround("ground1", 2.5, 70, 2, scene);
        var groundFour = BABYLON.Mesh.CreateGround("ground1", 2.5, 40, 2, scene);
          var groundFive = BABYLON.Mesh.CreateGround("ground1", 2.5, 40, 2, scene);
   	var box = BABYLON.MeshBuilder.CreateBox("box", {height: .5, width:.5, depth: .5, scene});
    
var boxTwo = BABYLON.MeshBuilder.CreateBox("boxTwo", {height: .5, width:40, depth: 70, scene});
var boxThree = BABYLON.MeshBuilder.CreateBox("boxThree", {height: 2.5, width:.5, depth: 71, scene});

var boxFour = BABYLON.MeshBuilder.CreateBox("boxFour", {height: 2.5, width:.5, depth: 71, scene});

var boxFive = BABYLON.MeshBuilder.CreateBox("boxFive", {height: 2.5, width:40, depth: .5, scene});

var boxSix = BABYLON.MeshBuilder.CreateBox("boxSix", {height: 2.5, width:40, depth: .5, scene});


	box.position.y = 1;
    
  boxTwo.position.z=.1;
   boxTwo.position.x=.1;
      boxThree.position.x=20.25;
        boxFour.position.x=-20.25;
        boxThree.position.y=1.25;
        boxFour.position.y=1.25;

   boxTwo.position.y=-.25;
boxFive.position.z=35.25;
        boxSix.position.z=-35.25;
boxFive.position.y=1.25;
        boxSix.position.y=1.25;

    	box.position.x =-5;
    	box.position.z = -1.5;
    scene.enablePhysics();
		var grid = new BABYLON.GridMaterial("grid", scene);		
		
groundTwo.rotate(BABYLON.Axis.Z, Math.PI/2, BABYLON.Space.WORLD);
groundThree.rotate(BABYLON.Axis.Z, Math.PI/2, BABYLON.Space.WORLD);
groundFour.rotate(BABYLON.Axis.Z, Math.PI/2, BABYLON.Space.WORLD);
groundFour.rotate(BABYLON.Axis.Y, Math.PI/2, BABYLON.Space.WORLD);
groundFive.rotate(BABYLON.Axis.Z, Math.PI/2, BABYLON.Space.WORLD);
groundFive.rotate(BABYLON.Axis.Y, Math.PI/2, BABYLON.Space.WORLD);
groundThree.position.x = -20;
groundThree.position.y = 1.25;
groundFour.position.z = -35;
groundFour.position.y = 1.25;
groundFive.position.z = 35;
groundFive.position.y = 1.25;
groundTwo.position.x = 20;
groundTwo.position.y = 1.25;
	grid.gridRatio = 1;

	grid.majorUnitFrequency = 5;
	// Set the diffuse texture
    sphere.material = grid;
    

 grid.mainColor = new BABYLON.Color4.FromHexString("#770000FF");
    grid.lineColor = new BABYLON.Color4.FromHexString("#FF0000FF");
boxTwo.material = blueMat;
    boxThree.material = blueMat;
    boxFour.material = blueMat;
    boxFive.material = blueMat;
    boxSix.material = blueMat;
    sphereTwo.material = grid;
      sphereThree.material = grid;
        sphereFour.material = grid;
          sphereFive.material = grid;
    ground.material = greenMat;
    ground.material.alpha = 0;
  groundTwo.material = blueMat;  groundThree.material = blueMat;  groundFour.material = blueMat;  groundFive.material = blueMat;
	sphere.physicsImpostor = new BABYLON.PhysicsImpostor(sphere, BABYLON.PhysicsImpostor.SphereImpostor, { mass:100, restitution: .2, friction: 1000 }, scene);
    sphereTwo.physicsImpostor = new BABYLON.PhysicsImpostor(sphereTwo, BABYLON.PhysicsImpostor.SphereImpostor, { mass: 100, restitution: .2 , friction: 1000}, scene);
        sphereThree.physicsImpostor = new BABYLON.PhysicsImpostor(sphereThree, BABYLON.PhysicsImpostor.SphereImpostor, { mass: 100, restitution: .2 , friction: 1000}, scene);
            sphereFour.physicsImpostor = new BABYLON.PhysicsImpostor(sphereFour, BABYLON.PhysicsImpostor.SphereImpostor, { mass: 100, restitution: .2 , friction: 1000}, scene);
                sphereFive.physicsImpostor = new BABYLON.PhysicsImpostor(sphereFive, BABYLON.PhysicsImpostor.SphereImpostor, { mass: 100, restitution: .2 , friction: 1000}, scene);
  //f  box.physicsImpostor = new BABYLON.PhysicsImpostor(box, BABYLON.PhysicsImpostor.SphereImpostor, { mass:101, restitution:.7 }, scene);

  // boxTwo.physicsImpostor = new BABYLON.PhysicsImpostor(boxTwo, BABYLON.PhysicsImpostor.SphereImpostor, { mass:.00001, restitution:.1 }, scene);
	ground.physicsImpostor = new BABYLON.PhysicsImpostor(ground, BABYLON.PhysicsImpostor.BoxImpostor, { mass: 0, restitution: 0.1, friction: 1000, disableBidirectionalTransformation: true }, scene);
  groundTwo.physicsImpostor = new BABYLON.PhysicsImpostor(groundTwo, BABYLON.PhysicsImpostor.BoxImpostor, { mass: 0, restitution: 0.1, friction: 1000 , disableBidirectionalTransformation: true}, scene);
  groundThree.physicsImpostor = new BABYLON.PhysicsImpostor(groundThree, BABYLON.PhysicsImpostor.BoxImpostor, { mass: 0, restitution: 0.1, friction: 1000, disableBidirectionalTransformation: true }, scene);
  groundFour.physicsImpostor = new BABYLON.PhysicsImpostor(groundFour, BABYLON.PhysicsImpostor.BoxImpostor, { mass: 0, restitution: 0.1, friction: 1000 , disableBidirectionalTransformation: true}, scene);
  groundFive.physicsImpostor = new BABYLON.PhysicsImpostor(groundFive, BABYLON.PhysicsImpostor.BoxImpostor, { mass: 0, restitution: 0.1, friction: 1000 , disableBidirectionalTransformation: true}, scene);
    

     sphereTwo.physicsImpostor.applyImpulse(new BABYLON.Vector3(10000, 10, 500), box.getAbsolutePosition());

	//sphere.physicsImpostor.setLinearVelocity(new BABYLON.Vector3(1, 0, 1));
 // box.physicsImpostor.setLinearVelocity(new BABYLON.Vector3( -3, 2,1));
var g = new BABYLON.Vector3(0, -1000, 0);



    scene.getPhysicsEngine().setGravity(g);    // Instrumentation
    
    
    return scene;

};

                /******* End of the create scene function ******/    

                var scene = createScene(); //Call the createScene function

            engine.runRenderLoop(function () { // Register a render loop to repeatedly render the scene
                    scene.render();
            });


            window.addEventListener("resize", function () { // Watch for browser/canvas resize events
                    engine.resize();
            });
    </script>
</body>
</html>
